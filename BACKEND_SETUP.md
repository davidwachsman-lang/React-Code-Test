# Supabase Setup â€“ Quick Start

The frontend no longer relies on a custom Express backend. Instead, it reads and writes data straight to Supabase. Follow the steps below to hook it up to your project.

## 1. Create (or Reuse) a Supabase Project
1. Go to [supabase.com](https://supabase.com/) and create a project.
2. In **Project Settings â†’ API**, copy the **Project URL** and **anon public key**.

## 2. Configure Environment Variables
Create `.env` (or update it) in the repo root:

```env
VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
```

Restart the dev server whenever these values change.

## 3. Create Tables
Set up the following tables/columns (use SQL Editor â†’ `Run`):

```sql
-- Estimates
create table if not exists "Estimates" (
  "EstimateID" bigint generated by default as identity primary key,
  "CustomerID" bigint,
  "JobID" bigint,
  "EstimateName" text,
  "EstimateDescription" text,
  "PropertyAddress" text,
  "EstimateData" jsonb,
  "TotalAmount" numeric,
  "Status" text default 'Draft',
  "CreatedAt" timestamptz default now(),
  "UpdatedAt" timestamptz default now()
);
```

Repeat for `Jobs`, `Customers`, and `Metrics` using the schemas listed in `README_API.md`. Adjust names/types to match your needs.

## 4. Configure Row Level Security
Enable RLS on each table and add policies that allow the anon/public key to read/write as needed. Example:

```sql
alter table "Estimates" enable row level security;

create policy "Allow anon CRUD" on "Estimates"
  for all
  using (auth.role() = 'anon')
  with check (auth.role() = 'anon');
```

Tighten these policies once you add authenticated users.

## 5. Test the Connection
1. Start Vite: `npm run dev`
2. In the browser console run:
   ```javascript
   import('./services/TEST_CONNECTION').then(m => m.testSupabaseConnection());
   ```
3. You should see a success message. If not, double-check the env vars and RLS policies.

## 6. Customize Services (Optional)
Need different filters or joins? Update the queries inside:
- `src/services/estimateService.js`
- `src/services/jobService.js`
- `src/services/customerService.js`
- `src/services/metricsService.js`

Each file contains plain Supabase calls you can tailor to your schema.

Youâ€™re ready to run the app fully on Supabaseâ€”no Azure SQL or custom backend required. ðŸŽ‰
